<h3>
    Edit '{{user.name}}'
    <small>#{{user._id}}</small>
</h3>

<form (ngSubmit)="onSubmit()" #userForm="ngForm" [ngFormOptions]="{updateOn: 'blur'}">

    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" name="name" required minlength="3" [(ngModel)]="user.name" [ngModelOptions]="{updateOn: 'blur'}"
            #name="ngModel">
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
            <div *ngIf="name.errors.required">
                name is required.
            </div>
            <div *ngIf="name.errors.minlength">
                name must be at least 3 characters long.
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="username">Username</label>
        <input type="email" class="form-control" id="username" name="username" required minlength="5" email [(ngModel)]="user.username"
            #username="ngModel">
        <div *ngIf="username.invalid && (username.dirty || username.touched)" class="alert alert-danger">
            <div *ngIf="username.errors.required">
                username is required.
            </div>
            <div *ngIf="username.errors.minlength">
                username must be at least 5 characters long.
            </div>
            <div *ngIf="username.errors.email">
                username must be a valid email address.
            </div>
        </div>
    </div>

    <div class="form-group">
        <legend class="col-form-legend">Type</legend>
        <div class="form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="type" [value]="1" [(ngModel)]="user.type" required> Regular
            </label>
        </div>
        <div class="form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="type" [value]="0" [(ngModel)]="user.type" required> Administrator
            </label>
        </div>
    </div>

    <hr>
    
    <div class="form-group row">
        <div class="col">
            <button [disabled]="!userForm.valid" type="submit" class="btn btn-primary">Update</button>
        </div>
        <div class="col text-right">
            <button class="btn btn-danger" (click)="delete()">Delete user</button>
        </div>
    </div>
</form>